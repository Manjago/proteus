# Proteus: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

> –î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∞.
> –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –∫–æ–¥–æ–º.

## 1. –û–±–∑–æ—Ä

**Proteus** ‚Äî —Å–∏–º—É–ª—è—Ü–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏, –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–æ–π [Tierra](https://en.wikipedia.org/wiki/Tierra_(computer_simulation)) –¢–æ–º–∞—Å–∞ –†—ç—è (1991).

–û—Ä–≥–∞–Ω–∏–∑–º—ã ‚Äî —ç—Ç–æ —Å–∞–º–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—â–∏–µ—Å—è –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∂–∏–≤—É—â–∏–µ –≤ –æ–±—â–µ–π –ø–∞–º—è—Ç–∏ ("—Å—É–ø–µ"). –û–Ω–∏ –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç –∑–∞ —Ä–µ—Å—É—Ä—Å—ã (–ø–∞–º—è—Ç—å, CPU-–≤—Ä–µ–º—è), –º—É—Ç–∏—Ä—É—é—Ç –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—Ç.

### –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

- –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã Tierra –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–µ–∫–µ (Java 21+)
- –ù–∞–±–ª—é–¥–∞—Ç—å —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –ø–∞—Ä–∞–∑–∏—Ç–æ–≤, –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–∑–∏—Ç–æ–≤ –∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º
- –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —ç–≤–æ–ª—é—Ü–∏–∏

### –û—Ç–ª–∏—á–∏—è –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π Tierra

| –ê—Å–ø–µ–∫—Ç | Tierra (1991) | Proteus |
|--------|---------------|---------|
| –Ø–∑—ã–∫ | C | Java 21+ |
| ISA | 32 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ | 16 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (ISA v1.1) |
| –ê–¥—Ä–µ—Å–∞—Ü–∏—è | Template-based | –ü—Ä—è–º–∞—è + Template (SEARCH) |
| –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã | –¢–æ–ª—å–∫–æ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ | MOVI (21-bit immediate) |

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      CLI (picocli)                          ‚îÇ
‚îÇ              run | analyze | resume | info                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  SimulatorConfig (HOCON)  ‚îÇ  SimulatorListener (events)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ                    Simulator                         ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - run(), stop(), seedAdam()                        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - aliveOrganisms[], organisms[]                    ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - MutationTracker                                  ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ         ‚îÇ                      ‚îÇ                    ‚îÇ       ‚îÇ
‚îÇ         ‚ñº                      ‚ñº                    ‚ñº       ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ    ‚îÇ  VirtualCPU ‚îÇ    ‚îÇ   Reaper    ‚îÇ    ‚îÇ MemoryMgr   ‚îÇ    ‚îÇ
‚îÇ    ‚îÇ             ‚îÇ    ‚îÇ             ‚îÇ    ‚îÇ             ‚îÇ    ‚îÇ
‚îÇ    ‚îÇ - execute() ‚îÇ    ‚îÇ - reap()    ‚îÇ    ‚îÇ - allocate()‚îÇ    ‚îÇ
‚îÇ    ‚îÇ - mutations ‚îÇ    ‚îÇ - register()‚îÇ    ‚îÇ - free()    ‚îÇ    ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ    ‚îÇ  CpuState   ‚îÇ    ‚îÇ  Organism   ‚îÇ                       ‚îÇ
‚îÇ    ‚îÇ             ‚îÇ    ‚îÇ             ‚îÇ                       ‚îÇ
‚îÇ    ‚îÇ - regs[8]   ‚îÇ    ‚îÇ - id, addr  ‚îÇ                       ‚îÇ
‚îÇ    ‚îÇ - IP        ‚îÇ    ‚îÇ - size      ‚îÇ                       ‚îÇ
‚îÇ    ‚îÇ - errors    ‚îÇ    ‚îÇ - alive     ‚îÇ                       ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                     AtomicIntegerArray                      ‚îÇ
‚îÇ                    "Soup" (10K-1M cells)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã

#### Core (—è–¥—Ä–æ —Å–∏–º—É–ª—è—Ü–∏–∏)

| –ö–ª–∞—Å—Å | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|-------|-----------------|
| `OpCode` | Enum –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π + encoding/decoding |
| `CpuState` | –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –æ—Ä–≥–∞–Ω–∏–∑–º–∞ (—Ä–µ–≥–∏—Å—Ç—Ä—ã, IP, —Å—á—ë—Ç—á–∏–∫–∏) |
| `VirtualCPU` | –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –º—É—Ç–∞—Ü–∏–∏ –ø—Ä–∏ COPY |
| `SystemCallHandler` | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è ALLOCATE, SPAWN |
| `Organism` | –û—Ä–≥–∞–Ω–∏–∑–º: –≥–µ–Ω–æ–º, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, lifecycle |
| `MemoryManager` | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é (allocate/free) |
| `FreeListMemoryManager` | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: Free List + First Fit |
| `Reaper` | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∂–Ω–µ—Ü–∞ (—É–±–∏–π—Å—Ç–≤–æ + –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ) |
| `AgeBasedReaper` | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: —É–±–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä–µ–π—à–∏—Ö |
| `MutationTracker` | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º—É—Ç–∞—Ü–∏–π –ø—Ä–∏ COPY |
| `Disassembler` | –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ –º–Ω–µ–º–æ–Ω–∏–∫–∏ |
| `GenomeBuilder` | Fluent API –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –≥–µ–Ω–æ–º–æ–≤ |
| `Adam` | –ü–µ—Ä–≤—ã–π —Å–∞–º–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—â–∏–π—Å—è –æ—Ä–≥–∞–Ω–∏–∑–º (13 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π) |

#### Application (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

| –ö–ª–∞—Å—Å | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|-------|-----------------|
| `SimulatorConfig` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (HOCON, typesafe-config) |
| `Simulator` | –ì–ª–∞–≤–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ |
| `SimulatorStats` | –°–Ω–∏–º–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ |
| `SimulatorListener` | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–±—ã—Ç–∏–π (spawn, death, checkpoint) |
| `DeathCause` | Enum –ø—Ä–∏—á–∏–Ω —Å–º–µ—Ä—Ç–∏ (ERRORS, REAPED) |

#### CLI (–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

| –ö–ª–∞—Å—Å | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|-------|-----------------|
| `ProteusCli` | –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (picocli) |
| `RunCommand` | –ö–æ–º–∞–Ω–¥–∞ `run` ‚Äî –∑–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ |
| `AnalyzeCommand` | –ö–æ–º–∞–Ω–¥–∞ `analyze` ‚Äî –∞–Ω–∞–ª–∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ |
| `InfoCommand` | –ö–æ–º–∞–Ω–¥–∞ `info` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ |

---

## 3. –ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (ISA v1.2)

–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è: [ISA_SPEC.md](ISA_SPEC.md)

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ v1.2 (Position-Independent Code)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | v1.1 | v1.2 |
|-----------|------|------|
| **JMP/JMPZ/JMPN** | –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö | IP-relative offset –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ |
| **LOAD/STORE** | –ê–±—Å–æ–ª—é—Ç–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è | startAddr-relative (—Å–≤–æ—è –ø–∞–º—è—Ç—å) |
| **GETADDR** | ‚Äî | –ù–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π startAddr |
| **Adam** | 13 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ JMP | 14 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, position-independent |

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PIC

1. **–î–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–º—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –≤ –ø–∞–º—è—Ç–∏ –±–µ–∑ –ø–∞—Ç—á–∏–Ω–≥–∞ –∫–æ–¥–∞
2. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å** ‚Äî –ø–æ—Ç–æ–º–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ª—é–±–æ–≥–æ –∞–¥—Ä–µ—Å–∞
3. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** ‚Äî –Ω–µ –Ω—É–∂–Ω—ã —Ä–µ–ª–æ–∫–∞—Ü–∏–∏ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏

### –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ |
|-----------|------------|
| –ë–∞–∑–æ–≤—ã–µ | `NOP`, `MOV`, `MOVI`, `GETADDR` |
| –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ | `ADD`, `SUB`, `INC`, `DEC` |
| –ü–∞–º—è—Ç—å (relative) | `LOAD`, `STORE` |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (IP-relative) | `JMP offset`, `JMPZ R, offset`, `JMPN Ra, Rb, offset` |
| –°–∏—Å—Ç–µ–º–Ω—ã–µ (absolute) | `COPY`, `ALLOCATE`, `SPAWN` |
| –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ | `SEARCH` |

### –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (32 –±–∏—Ç–∞):**
```
[8 bits: OpCode | 3 bits: R1 | 3 bits: R2 | 3 bits: R3 | 3 bits: R4 | 12 bits: reserved]
```

**–§–æ—Ä–º–∞—Ç MOVI:**
```
[8 bits: OpCode | 3 bits: R_dst | 21 bits: immediate (unsigned)]
```

**–§–æ—Ä–º–∞—Ç JMP/JMPZ/JMPN (v1.2):**
```
[8 bits: OpCode | 3 bits: R_cond1 | 3 bits: R_cond2 | 18 bits: offset (signed)]
```

---

## 4. –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –¥–∏–∑–∞–π–Ω-—Ä–µ—à–µ–Ω–∏—è

### 4.1. –ú—É—Ç–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ COPY ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:** –ú—É—Ç–∞—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –¢–û–õ–¨–ö–û –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `COPY`.

**–ü–æ—á–µ–º—É:**
- –ë–∏–æ–ª–æ–≥–∏—á–Ω–µ–µ ‚Äî –º—É—Ç–∞—Ü–∏–∏ –≤ –ø—Ä–∏—Ä–æ–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø—Ä–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –î–ù–ö
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–µ–µ ‚Äî –ª–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∏ –ø–æ–Ω–∏–º–∞—Ç—å
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ ‚Äî –Ω–µ –Ω—É–∂–µ–Ω —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –º—É—Ç–∞—Ü–∏–π

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–æ—Ç–≤–µ—Ä–≥–Ω—É—Ç—ã):**
- –§–æ–Ω–æ–≤—ã–µ –º—É—Ç–∞—Ü–∏–∏ (cosmic rays) ‚Äî –¥–æ–±–∞–≤–ª—è—é—Ç —à—É–º –±–µ–∑ –ø–æ–ª—å–∑—ã
- –ú—É—Ç–∞—Ü–∏–∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ ‚Äî –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ

```java
// VirtualCPU.java
case COPY -> {
    int value = memory.get(srcAddr);
    if (random.nextDouble() < mutationRate) {
        value = mutate(value);  // ‚Üê –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –º—É—Ç–∞—Ü–∏–π!
    }
    memory.set(dstAddr, value);
}
```

### 4.2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –ø–∞–º—è—Ç–∏ ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:** –û—Ä–≥–∞–Ω–∏–∑–º—ã –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å –õ–Æ–ë–£–Æ —è—á–µ–π–∫—É –ø–∞–º—è—Ç–∏.

**–ü–æ—á–µ–º—É —ç—Ç–æ –§–ò–ß–ê, –∞ –Ω–µ –±–∞–≥:**
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—è–≤–ª–µ–Ω–∏–µ **–ø–∞—Ä–∞–∑–∏—Ç–æ–≤** (–∏—Å–ø–æ–ª—å–∑—É—é—Ç —á—É–∂–æ–π –∫–æ–¥)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç **—Ö–∏—â–Ω–∏—á–µ—Å—Ç–≤–æ** (–ø–æ—Ä—Ç—è—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤)
- –°–æ–∑–¥–∞—ë—Ç **—ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ** –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –¥–∏–Ω–∞–º–∏–∫—É
- –¢–∞–∫ –±—ã–ª–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π Tierra

**–ù–∞–±–ª—é–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```
Adam (addr=0) –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω –ø–æ—Ç–æ–º–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏
—Å–µ–±—è –ø–æ–≤–µ—Ä—Ö –µ–≥–æ –∫–æ–¥–∞. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ "—Å–º–µ—Ä—Ç–∏" Adam'–∞ –∏ 
—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—é —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –Ω–∏—à.
```

### 4.3. Round-Robin –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:** –ö–∞–∂–¥—ã–π –æ—Ä–≥–∞–Ω–∏–∑–º –ø–æ–ª—É—á–∞–µ—Ç —Ä–æ–≤–Ω–æ 1 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∑–∞ —Ü–∏–∫–ª.

**–ü–æ—á–µ–º—É:**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ß–µ—Å—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ CPU
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å (–≤–∞–∂–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

```java
for (int cycle = 0; cycle < maxCycles; cycle++) {
    for (Organism org : organisms) {
        if (org.alive) {
            cpu.execute(org.state, soup);
        }
    }
}
```

**–ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏–ª–∏ energy-based scheduling.

### 4.4. –°–º–µ—Ä—Ç—å –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—à–∏–±–æ–∫ ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:** –û—Ä–≥–∞–Ω–∏–∑–º —É–º–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ 100 –æ—à–∏–±–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

**–¢–∏–ø—ã –æ—à–∏–±–æ–∫:**
- `ERROR_IP_OUT_OF_BOUNDS` ‚Äî IP –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ø–∞–º—è—Ç–∏
- `ERROR_UNKNOWN_OPCODE` ‚Äî –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `ERROR_MEMORY_OUT_OF_BOUNDS` ‚Äî —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏

**–ü–æ—á–µ–º—É –ø–æ—Ä–æ–≥, –∞ –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–º–µ—Ä—Ç—å:**
- –î–∞—ë—Ç —à–∞–Ω—Å "–æ–ø—Ä–∞–≤–∏—Ç—å—Å—è" –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–π –æ—à–∏–±–∫–∏
- –ú—É—Ç–∞–Ω—Ç—ã —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –≤—ã–∂–∏–≤–∞—é—Ç
- –°–æ–∑–¥–∞—ë—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç fitness'–∞

### 4.5. MOVI –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `MOVI R, imm21` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç.

**–ë—ã–ª–æ (Adam v1, 32 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏):**
```asm
INC R4      ; R4 = 1
ADD R4, R4  ; R4 = 2
ADD R4, R4  ; R4 = 4
...         ; 6 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ 32!
```

**–°—Ç–∞–ª–æ (Adam v2, 13 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π):**
```asm
MOVI R4, 13  ; 1 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è!
```

**–ü–æ—á–µ–º—É 21 –±–∏—Ç:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ 2M —è—á–µ–µ–∫ –ø–∞–º—è—Ç–∏.

---

## 5. Adam ‚Äî –ø–µ—Ä–≤—ã–π –æ—Ä–≥–∞–Ω–∏–∑–º

Adam ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–∞–º–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—â–∏–π—Å—è –æ—Ä–≥–∞–Ω–∏–∑–º. –≠—Ç–æ "–ø—Ä–µ–¥–æ–∫", –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ.

### –ì–µ–Ω–æ–º v3 (14 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, Position-Independent)

```asm
; –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
0000: MOVI R4, 14       ; R4 = SIZE
0001: GETADDR R7        ; R7 = –º–æ–π –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –∞–¥—Ä–µ—Å

; –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
0002: ALLOCATE R4, R3   ; R3 = –∞–¥—Ä–µ—Å –¥–ª—è –ø–æ—Ç–æ–º–∫–∞

; –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π
0003: MOV R5, R7        ; R5 = src pointer (–º–æ–π —Å—Ç–∞—Ä—Ç)
0004: MOV R6, R3        ; R6 = dst pointer (—Å—Ç–∞—Ä—Ç –ø–æ—Ç–æ–º–∫–∞)
0005: MOVI R0, 0        ; R0 = counter

; –¶–∏–∫–ª –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (–∞–¥—Ä–µ—Å 6)
0006: COPY [R5], [R6]   ; –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å –º—É—Ç–∞—Ü–∏–µ–π!
0007: INC R5            ; src++
0008: INC R6            ; dst++
0009: INC R0            ; counter++
000A: JMPN R0, R4, -5   ; if counter < SIZE, goto 6

; –ü–æ—Ä–æ–∂–¥–µ–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä
000B: SPAWN R3, R4      ; –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–º–∫–∞
000C: MOVI R0, 0        ; Reset counter
000D: JMP -12           ; goto 2 (ALLOCATE)
```

### –†–µ–≥–∏—Å—Ç—Ä—ã (v3)

| –†–µ–≥–∏—Å—Ç—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------|
| R0 | Counter (0 to size-1) |
| R3 | –ê–¥—Ä–µ—Å –ø–æ—Ç–æ–º–∫–∞ (–æ—Ç ALLOCATE) |
| R4 | –†–∞–∑–º–µ—Ä –≥–µ–Ω–æ–º–∞ (14) |
| R5 | Source pointer (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è) |
| R6 | Destination pointer (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è) |
| R7 | –ú–æ–π startAddr (–æ—Ç GETADDR) |

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. MOVI R4, 14; GETADDR R7  ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç        ‚îÇ
‚îÇ                              ‚Üì                          ‚îÇ
‚îÇ  2. ALLOCATE R4, R3          ‚Äî –∑–∞–ø—Ä–æ—Å –ø–∞–º—è—Ç–∏            ‚îÇ
‚îÇ                              ‚Üì                          ‚îÇ
‚îÇ  3. MOV R1, R3; MOV R2, R4   ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π    ‚îÇ
‚îÇ                              ‚Üì                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ  4. COPY [R0], [R1]       ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ      ‚îÇ √ó13   ‚îÇ
‚îÇ  ‚îÇ  5. INC R0; INC R1; DEC R2                   ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ  6. JMPN R2, [R5]         ‚Äî —Ü–∏–∫–ª             ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                              ‚Üì                          ‚îÇ
‚îÇ  7. SPAWN R3, R4             ‚Äî —Ä–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ç–æ–º–∫–∞         ‚îÇ
‚îÇ                              ‚Üì                          ‚îÇ
‚îÇ  8. SUB R0, R0; JMP [R6]     ‚Äî —Å–±—Ä–æ—Å –∏ –ø–æ–≤—Ç–æ—Ä          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

### 6.1. –û–±–∑–æ—Ä

–ü–∞–º—è—Ç—å ("—Å—É–ø") ‚Äî —ç—Ç–æ –æ–±—â–∏–π –º–∞—Å—Å–∏–≤ –∏–∑ 10,000 —è—á–µ–µ–∫ (32-bit int –∫–∞–∂–¥–∞—è). –û—Ä–≥–∞–Ω–∏–∑–º—ã –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç –∑–∞ –º–µ—Å—Ç–æ –≤ —Å—É–ø–µ.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        SOUP (10,000 cells)                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Org#0 ‚îÇ Org#1 ‚îÇ FREE  ‚îÇ Org#3  ‚îÇ FREE  ‚îÇ Org#5 ‚îÇ   FREE    ‚îÇ
‚îÇ  13   ‚îÇ  13   ‚îÇ  26   ‚îÇ   13   ‚îÇ  13   ‚îÇ  13   ‚îÇ   ...     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 6.2. MemoryManager

**–ê–ª–≥–æ—Ä–∏—Ç–º: Free List + First Fit**

Free List —Ö—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –±–ª–æ–∫–æ–≤, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –∞–¥—Ä–µ—Å—É:

```
FreeList: [(addr=26, size=26), (addr=52, size=13), (addr=78, size=9922)]
```

**–û–ø–µ—Ä–∞—Ü–∏–∏:**

| –ú–µ—Ç–æ–¥ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|----------|
| `allocate(size)` | O(n) | First Fit ‚Äî –ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –±–ª–æ–∫ |
| `free(addr, size)` | O(n) | –î–æ–±–∞–≤–∏—Ç—å + —Å–ª–∏—Ç—å —Å–æ—Å–µ–¥–Ω–∏–µ |
| `getFreeMemory()` | O(n) | –°—É–º–º–∞ –≤—Å–µ—Ö —Å–≤–æ–±–æ–¥–Ω—ã—Ö –±–ª–æ–∫–æ–≤ |
| `getLargestFreeBlock()` | O(n) | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –±–ª–æ–∫ |

**Allocate (First Fit):**
```
1. –ü—Ä–æ–π—Ç–∏ –ø–æ Free List
2. –ù–∞–π—Ç–∏ –ø–µ—Ä–≤—ã–π –±–ª–æ–∫ —Å size >= requested
3. –ï—Å–ª–∏ –±–ª–æ–∫ –±–æ–ª—å—à–µ ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç—å:
   - –í–µ—Ä–Ω—É—Ç—å –Ω–∞—á–∞–ª–æ –±–ª–æ–∫–∞
   - –û—Å—Ç–∞—Ç–æ–∫ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ Free List
4. –ï—Å–ª–∏ –±–ª–æ–∫ —Ç–æ—á–Ω–æ —Ä–∞–≤–µ–Ω ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–∑ Free List
5. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –≤–µ—Ä–Ω—É—Ç—å -1
```

**Free + Coalesce:**
```
1. –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ (addr, size) –≤ Free List
2. –ù–∞–π—Ç–∏ —Å–æ—Å–µ–¥–µ–π:
   - –õ–µ–≤—ã–π: –±–ª–æ–∫, –≥–¥–µ (prev.addr + prev.size == addr)
   - –ü—Ä–∞–≤—ã–π: –±–ª–æ–∫, –≥–¥–µ (addr + size == next.addr)
3. –°–ª–∏—Ç—å —Å —Å–æ—Å–µ–¥—è–º–∏ –≤ –æ–¥–∏–Ω –±–ª–æ–∫
4. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±–ª–æ–∫–∏, –¥–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π
```

**–ü—Ä–∏–º–µ—Ä —Å–ª–∏—è–Ω–∏—è:**
```
–î–æ:   [(10, 5), (20, 10), (40, 15)]
Free(15, 5):
      [(10, 5), (15, 5), (20, 10), (40, 15)]  ‚Äî –¥–æ–±–∞–≤–∏–ª–∏
      [(10, 20), (40, 15)]                     ‚Äî —Å–ª–∏–ª–∏ 10+5+5+10=20
```

### 6.3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Ä–≥–∞–Ω–∏–∑–º–∞–º–∏

–ü—Ä–∏ **—Ä–æ–∂–¥–µ–Ω–∏–∏** (SPAWN):
```java
int addr = memoryManager.allocate(size);
if (addr == -1) {
    // –ù–µ—Ç –º–µ—Å—Ç–∞ ‚Äî –≤—ã–∑–≤–∞—Ç—å Reaper –∏–ª–∏ –æ—Ç–∫–∞–∑–∞—Ç—å
}
```

–ü—Ä–∏ **—Å–º–µ—Ä—Ç–∏**:
```java
organism.alive = false;
memoryManager.free(organism.startAddr, organism.size);
```

### 6.4. –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –º–Ω–æ–≥–∏—Ö allocate/free –æ–±—Ä–∞–∑—É—é—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∏–µ "–¥—ã—Ä—ã", –≤ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–º—ã.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇOrg ‚îÇ5 ‚îÇOrg ‚îÇ5 ‚îÇOrg ‚îÇ5 ‚îÇOrg ‚îÇ      FREE        ‚îÇ
‚îÇ 13 ‚îÇ  ‚îÇ 13 ‚îÇ  ‚îÇ 13 ‚îÇ  ‚îÇ 13 ‚îÇ       100        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚Üë      ‚Üë      ‚Üë
    –î—ã—Ä—ã –ø–æ 5 ‚Äî –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–º 13
```

**–ú–µ—Ç—Ä–∏–∫–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏:**
```
fragmentation = 1 - (largestFreeBlock / totalFreeMemory)
```
- 0.0 = –≤—Å—è —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞
- 0.9 = 90% —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ –º–µ–ª–∫–∏—Ö –¥—ã—Ä–∞—Ö

### 6.5. –î–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è (Stage 3)

> üìã **TODO: –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–ª—è Stage 3**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ allocate() –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –±–ª–æ–∫, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—É–º–º–∞—Ä–Ω–æ –ø–∞–º—è—Ç–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

**–ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–º–ø–∞–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
```
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∂–∏–≤–æ–≥–æ –æ—Ä–≥–∞–Ω–∏–∑–º–∞ (–≤ –ø–æ—Ä—è–¥–∫–µ –∞–¥—Ä–µ—Å–æ–≤):
   a. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–æ–º –≤ –Ω–∞—á–∞–ª–æ —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
   b. –û–±–Ω–æ–≤–∏—Ç—å organism.startAddr
   c. –û–±–Ω–æ–≤–∏—Ç—å organism.state.IP (–µ—Å–ª–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—É—é –ø–æ–∑–∏—Ü–∏—é)
3. –û–±–Ω–æ–≤–∏—Ç—å Free List (–æ–¥–Ω–∞ –±–æ–ª—å—à–∞—è –¥—ã—Ä–∞ –≤ –∫–æ–Ω—Ü–µ)
4. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

**–°–ª–æ–∂–Ω–æ—Å—Ç–∏:**
- IP –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–µ–¥–∏–Ω—É –≥–µ–Ω–æ–º–∞ ‚Äî –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–¥–≤–∏–Ω—É—Ç—å
- R6 —É Adam'–∞ = 0 (–Ω–∞—á–∞–ª–æ –≥–µ–Ω–æ–º–∞) ‚Äî –ø–æ—Å–ª–µ —Å–¥–≤–∏–≥–∞ –±—É–¥–µ—Ç –Ω–µ–≤–µ—Ä–µ–Ω
- –û—Ä–≥–∞–Ω–∏–∑–º—ã –º–æ–≥—É—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —á—É–∂–∏–µ –∞–¥—Ä–µ—Å–∞ (–ø–∞—Ä–∞–∑–∏—Ç—ã)

**–í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —É–±–∏–≤–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–±–æ—Ä!).

---

## 7. Reaper (–ñ–Ω–µ—Ü)

### 7.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Reaper ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º "—Å–º–µ—Ä—Ç–∏ –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏", –∫–æ—Ç–æ—Ä—ã–π:
- –£–±–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã—Ö/–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤
- –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –∏—Ö –ø–∞–º—è—Ç—å —á–µ—Ä–µ–∑ MemoryManager
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫—Ä—É–≥–æ–≤–æ—Ä–æ—Ç –ø–æ–∫–æ–ª–µ–Ω–∏–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞–≥–Ω–∞—Ü–∏—é —ç–≤–æ–ª—é—Ü–∏–∏

–ë–µ–∑ Reaper'–∞ –ø–∞–º—è—Ç—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, –æ—Ä–≥–∞–Ω–∏–∑–º—ã –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –∏ —ç–≤–æ–ª—é—Ü–∏—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

### 7.2. –ê–ª–≥–æ—Ä–∏—Ç–º (Age-Based)

–û—Ä–≥–∞–Ω–∏–∑–º—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É:

```
ReaperQueue: [Org#0 age=5000] ‚Üí [Org#3 age=4500] ‚Üí [Org#7 age=4200] ‚Üí ...
              ‚Üë —Å—Ç–∞—Ä–µ–π—à–∏–π                                    –º–ª–∞–¥—à–∏–π ‚Üë
```

**–û–ø–µ—Ä–∞—Ü–∏–∏:**

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `register(organism)` | –î–æ–±–∞–≤–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–º –≤ –æ—á–µ—Ä–µ–¥—å (–ø—Ä–∏ SPAWN) |
| `unregister(organism)` | –£–¥–∞–ª–∏—Ç—å –∏–∑ –æ—á–µ—Ä–µ–¥–∏ (–ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –æ—Ç –æ—à–∏–±–æ–∫) |
| `reap()` | –£–±–∏—Ç—å –æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä–µ–π—à–µ–≥–æ, –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å |
| `reapUntilFree(size)` | –£–±–∏–≤–∞—Ç—å –ø–æ–∫–∞ –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ |

**–ê–ª–≥–æ—Ä–∏—Ç–º reap():**
```
1. –í–∑—è—Ç—å —Å—Ç–∞—Ä–µ–π—à–∏–π –æ—Ä–≥–∞–Ω–∏–∑–º –∏–∑ –æ—á–µ—Ä–µ–¥–∏
2. –ü–æ–º–µ—Ç–∏—Ç—å organism.alive = false
3. –í—ã–∑–≤–∞—Ç—å memoryManager.free(org.addr, org.size)
4. –£–¥–∞–ª–∏—Ç—å –∏–∑ –æ—á–µ—Ä–µ–¥–∏
5. –£–≤–µ–ª–∏—á–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ reapCount
```

### 7.3. –¢—Ä–∏–≥–≥–µ—Ä—ã

| –¢—Ä–∏–≥–≥–µ—Ä | –ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç |
|---------|-------------------|
| **–ü–æ –ø–∞–º—è—Ç–∏** | `allocate()` –≤–µ—Ä–Ω—É–ª -1 |
| **–ü–æ –ø–æ–ø—É–ª—è—Ü–∏–∏** | `organisms.size() >= MAX_POPULATION` |
| **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π** | –ö–∞–∂–¥—ã–µ N —Ü–∏–∫–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

**–û—Å–Ω–æ–≤–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä ‚Äî –Ω–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏:**
```java
int addr = memoryManager.allocate(size);
if (addr == -1) {
    // –ù–µ—Ç –º–µ—Å—Ç–∞ ‚Äî –≤—ã–∑–≤–∞—Ç—å Reaper
    reaper.reapUntilFree(size);
    addr = memoryManager.allocate(size);
}
```

### 7.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Scheduler                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ   SPAWN ‚îÄ‚îÄ‚ñ∫ Reaper.register(child)                          ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ   ALLOCATE fails ‚îÄ‚îÄ‚ñ∫ Reaper.reapUntilFree(size)             ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ                   MemoryManager.free()                      ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ                   Retry ALLOCATE                            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ   Death by errors ‚îÄ‚îÄ‚ñ∫ Reaper.unregister(org)                ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ                   MemoryManager.free()                      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 7.5. –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `reapCount` | –í—Å–µ–≥–æ —É–±–∏—Ç–æ Reaper'–æ–º |
| `averageAgeAtDeath` | –°—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ |
| `oldestAlive` | –í–æ–∑—Ä–∞—Å—Ç —Å—Ç–∞—Ä–µ–π—à–µ–≥–æ –∂–∏–≤–æ–≥–æ |
| `youngestReaped` | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç —É–±–∏—Ç–æ–≥–æ |

### 7.6. –ü—Ä–∏–Ω—Ü–∏–ø —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏

**–ü–æ—á–µ–º—É Age-Based, –∞ –Ω–µ Random:**
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å ‚Äî –ª–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- –î–∞—ë—Ç —à–∞–Ω—Å –º–æ–ª–æ–¥—ã–º ‚Äî —Ç–æ–ª—å–∫–æ —á—Ç–æ —Ä–æ–¥–∏–≤—à–∏–µ—Å—è –Ω–µ —É–º—Ä—É—Ç —Å—Ä–∞–∑—É
- –≠–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ ‚Äî –∫—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑–º–Ω–æ–∂–∞–µ—Ç—Å—è, —Ç–æ—Ç –≤—ã–∂–∏–≤–∞–µ—Ç
- –ö–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π Tierra

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–¥–ª—è –±—É–¥—É—â–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤):**
- **Fitness-based**: —É–±–∏–≤–∞—Ç—å —Ç–µ—Ö, –∫—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–∑–º–Ω–æ–∂–∞–µ—Ç—Å—è
- **Error-based**: —É–±–∏–≤–∞—Ç—å —Ç–µ—Ö, —É –∫–æ–≥–æ –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫
- **Random**: —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä (—Ö–∞–æ—Ç–∏—á–Ω–µ–µ, –Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ?)

---

## 8. –¢—Ä–µ–∫–∏–Ω–≥ –º—É—Ç–∞—Ü–∏–π

### 8.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

MutationTracker –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –º—É—Ç–∞—Ü–∏–∏, –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏–µ –ø—Ä–∏ COPY, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—ã–ª–æ:
- –£–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ –º—É—Ç–∞—Ü–∏–∏ "–≤—ã–∂–∏–ª–∏" (–ø–æ–ø–∞–ª–∏ –≤ –∂–∏–≤—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤)
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —á–∞—â–µ –º—É—Ç–∏—Ä—É—é—Ç
- –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –º—É—Ç–∞—Ü–∏–∏ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã, –∞ –∫–∞–∫–∏–µ –ª–µ—Ç–∞–ª—å–Ω—ã

### 8.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞

**MutationRecord:**
```java
record MutationRecord(
    long cycle,           // –ö–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞
    int sourceAddr,       // –û—Ç–∫—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏
    int destAddr,         // –ö—É–¥–∞ –∑–∞–ø–∏—Å–∞–ª–∏
    int originalValue,    // –ë—ã–ª–æ
    int mutatedValue      // –°—Ç–∞–ª–æ
)
```

**MutationTracker:**
- `record(cycle, src, dst, oldVal, newVal)` ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å –º—É—Ç–∞—Ü–∏—é
- `getMutationsInRange(start, end)` ‚Äî –º—É—Ç–∞—Ü–∏–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –∞–¥—Ä–µ—Å–æ–≤
- `getSurvivedMutations(organisms)` ‚Äî –º—É—Ç–∞—Ü–∏–∏ –≤ –∂–∏–≤—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–∞—Ö

### 8.3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```
VirtualCPU.executeCopy():
    if (mutated) {
        tracker.record(cycle, srcAddr, dstAddr, original, mutated);
    }

AdamDemo.printFinalReport():
    List<MutationRecord> survived = tracker.getSurvivedMutations(aliveOrganisms);
    for (mutation : survived) {
        print(disassemble(original) + " ‚Üí " + disassemble(mutated));
    }
```

---

## 9. –ù–∞–±–ª—é–¥–∞–µ–º—ã–µ —Ñ–µ–Ω–æ–º–µ–Ω—ã

### 9.1. –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞ (–±–µ–∑ Reaper'–∞)

```
Cycle 500:   100 –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤, –ø–∞–º—è—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
Cycle 3000:  –ú–∞—Å—Å–æ–≤–æ–µ –≤—ã–º–∏—Ä–∞–Ω–∏–µ (–ø–µ—Ä–µ–∑–∞–ø–∏—Å—å –ø–∞–º—è—Ç–∏)
Cycle 4000:  41 –≤—ã–∂–∏–≤—à–∏–π, —ç–≤–æ–ª—é—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å
Cycle 50000: –°—Ç–∞–≥–Ω–∞—Ü–∏—è ‚Äî –Ω–µ—Ç –Ω–æ–≤—ã—Ö spawn'–æ–≤
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–µ–∑ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –æ—Ä–≥–∞–Ω–∏–∑–º—ã –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –∫–æ–¥ –ø–æ–≤—Ä–µ–∂–¥–∞–µ—Ç—Å—è, –≤—Å–µ —É–º–∏—Ä–∞—é—Ç.

**–†–µ—à–µ–Ω–∏–µ:** Reaper –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å, —Å–æ–∑–¥–∞–≤–∞—è —É—Å—Ç–æ–π—á–∏–≤—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É.

### 9.2. –°–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ Adam'–∞

Adam (addr=0) –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω —Å–≤–æ–∏–º–∏ –ø–æ—Ç–æ–º–∫–∞–º–∏:
```
–ë—ã–ª–æ: MOVI R4, 13 | MOVI R5, 5 | ALLOCATE...
–°—Ç–∞–ª–æ: MOV R1, R3 | MOV R2, R4 | COPY...
```

–ü–æ—Ç–æ–º–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ 3-7 —Å–≤–æ–µ–≥–æ –≥–µ–Ω–æ–º–∞ –≤ –æ–±–ª–∞—Å—Ç—å 0-4.

### 9.3. –í—ã–∂–∏–≤—à–∏–µ –ª–∏–Ω–∏–∏

–û—Ä–≥–∞–Ω–∏–∑–º—ã, —É—Å–ø–µ–≤—à–∏–µ "—É–±–µ–∂–∞—Ç—å" –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ (100-600, 800-1100), –≤—ã–∂–∏–ª–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–∏–ª–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–æ–º –≤–∏–¥–µ.

### 9.4. Silent Mutations (—Ç–∏—Ö–∏–µ –º—É—Ç–∞—Ü–∏–∏)

**–§–µ–Ω–æ–º–µ–Ω:** –ú—É—Ç–∞—Ü–∏–∏ –≤ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–∏—Ç–∞—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –Ω–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è.

```
MOV R1, R3:  0x012C0000  ‚Üê –±–∏—Ç—ã 0-19 –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
             ‚Üì –º—É—Ç–∞—Ü–∏—è –≤ –±–∏—Ç–µ 14
MOV R1, R3:  0x012C4000  ‚Üê –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫ –∂–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ
```

**–ê–Ω–∞–ª–æ–≥ –≤ –±–∏–æ–ª–æ–≥–∏–∏:** –°–∏–Ω–æ–Ω–∏–º–∏—á–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏ –≤ –î–ù–ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–µ–Ω—è—é—Ç –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç—É.

### 9.5. Cryptic Variation Bomb (–±–æ–º–±–∞ —Å–∫—Ä—ã—Ç–æ–π –≤–∞—Ä–∏–∞—Ü–∏–∏)

**–§–µ–Ω–æ–º–µ–Ω:** –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π "–º—É—Å–æ—Ä" –≤ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–∏—Ç–∞—Ö –≤–Ω–µ–∑–∞–ø–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–Ω–∞—á–∞—â–∏–º –ø—Ä–∏ –º—É—Ç–∞—Ü–∏–∏ opcode.

```
–ü–æ–∫–æ–ª–µ–Ω–∏–µ 1:   MOV R1, R3     0x012C0000
                                    ‚Üì silent mutations –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
–ü–æ–∫–æ–ª–µ–Ω–∏–µ 12:  MOV R1, R3     0x012CFFFF  ‚Üê 20 –±–∏—Ç "–º—É—Å–æ—Ä–∞"
                                    ‚Üì –º—É—Ç–∞—Ü–∏—è opcode (0x01‚Üí0x02)
–ü–æ–∫–æ–ª–µ–Ω–∏–µ 13:  MOVI R1, 1048575  0x022CFFFF  ‚Üê BOOM!
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- MOV ‚Üí MOVI: 20 –±–∏—Ç –º—É—Å–æ—Ä–∞ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è immediate-–∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π (–¥–æ 2M!)
- –ú–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –∞–¥—Ä–µ—Å –≤ —Ä–µ–≥–∏—Å—Ç—Ä
- –í–æ–∑–º–æ–∂–µ–Ω "—ç–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π —Å–∫–∞—á–æ–∫" ‚Äî —Ä–µ–∑–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è

**–ê–Ω–∞–ª–æ–≥ –≤ –±–∏–æ–ª–æ–≥–∏–∏:** Cryptic genetic variation ‚Äî —Å–∫—Ä—ã—Ç–∞—è –≤–∞—Ä–∏–∞—Ü–∏—è –≤ –∏–Ω—Ç—Ä–æ–Ω–∞—Ö, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–Ω–∞—á–∞—â–µ–π –ø—Ä–∏ –º—É—Ç–∞—Ü–∏–∏ —Å–ø–ª–∞–π—Å–∏–Ω–≥–∞.

### 9.6. –°—É–ø–µ—Ä–ø—Ä–µ–¥–∫–∏

–ü—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º Reaper'–µ –∏–Ω–æ–≥–¥–∞ –æ–¥–∏–Ω –æ—Ä–≥–∞–Ω–∏–∑–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–µ–¥–∫–æ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∂–∏–≤—ã—Ö:
```
‚úì #960: parent=668
‚úì #961: parent=668
‚úì #962: parent=668
...
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –£–¥–∞—á–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è)
- –í–æ–∑–º–æ–∂–Ω–æ, –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≥–µ–Ω–æ–º (–±—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑–º–Ω–æ–∂–∞–µ—Ç—Å—è)
- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç (founder effect)

### 9.7. Population Bottleneck (–±—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ)

**–§–µ–Ω–æ–º–µ–Ω:** –ú–∞—Å—Å–æ–≤–æ–µ –≤—ã–º–∏—Ä–∞–Ω–∏–µ, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã–∂–∏–≤–∞–µ—Ç –º–∞–ª–∞—è –≥—Ä—É–ø–ø–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö –æ—Å–æ–±–µ–π.

```
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:
  Total spawns:        525
  Deaths by errors:    451 (85%!)
  Alive:               5
  Survived mutations:  0
  Instruction diff:    0 (–≤—Å–µ –∫–ª–æ–Ω—ã!)
```

**–ú–µ—Ö–∞–Ω–∏–∑–º:**
1. –†–∞–Ω–Ω—è—è –ø–æ–ø—É–ª—è—Ü–∏—è —Ä–∞—Å—Ç—ë—Ç, –º—É—Ç–∞—Ü–∏–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
2. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º—É—Ç–∞—Ü–∏–π –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ª–µ—Ç–∞–ª—å–Ω—ã–º–∏
3. –í—ã–∂–∏–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ "—á–∏—Å—Ç—ã–µ" –æ—Å–æ–±–∏ –±–µ–∑ –≤—Ä–µ–¥–Ω—ã—Ö –º—É—Ç–∞—Ü–∏–π
4. –ü–æ–ø—É–ª—è—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑ –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏ –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–æ—Ç–µ—Ä—è –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
- –í—Å–µ –≤—ã–∂–∏–≤—à–∏–µ ‚Äî –∫–ª–æ–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- "–ß–∏—Å—Ç—ã–π –ª–∏—Å—Ç" –¥–ª—è –Ω–æ–≤–æ–π —ç–≤–æ–ª—é—Ü–∏–∏

**–ê–Ω–∞–ª–æ–≥ –≤ –±–∏–æ–ª–æ–≥–∏–∏:** –†–µ–∞–ª—å–Ω—ã–µ –±—É—Ç—ã–ª–æ—á–Ω—ã–µ –≥–æ—Ä–ª—ã—à–∫–∏ (–≥–µ–ø–∞—Ä–¥—ã, —Å–µ–≤–µ—Ä–Ω—ã–µ –º–æ—Ä—Å–∫–∏–µ —Å–ª–æ–Ω—ã) –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –Ω–∏–∑–∫–æ–º—É –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–º—É —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—é –ø–æ–ø—É–ª—è—Ü–∏–∏.

---

## 10. –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `totalSpawns` | –í—Å–µ–≥–æ —É—Å–ø–µ—à–Ω—ã—Ö SPAWN |
| `failedAllocations` | –ù–µ—É–¥–∞—á–Ω—ã—Ö ALLOCATE |
| `aliveCount` | –ñ–∏–≤—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤ |
| `memoryUsed` | –ó–∞–Ω—è—Ç–æ —è—á–µ–µ–∫ –ø–∞–º—è—Ç–∏ |

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `generations` | –ì–ª—É–±–∏–Ω–∞ —Ä–æ–¥–æ—Å–ª–æ–≤–Ω–æ–π |
| `averageAge` | –°—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ |
| `replicationRate` | Spawn'–æ–≤ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–º |
| `diversityIndex` | –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≥–µ–Ω–æ–º–æ–≤ |

---

## 11. CLI –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

```bash
# –°–±–æ—Ä–∫–∞
mvn clean package

# –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
java -jar proteus-1.0.0-SNAPSHOT.jar run [options]

# –û–ø—Ü–∏–∏ run:
#   -c, --cycles         Max cycles (0 = infinite)
#   -s, --soup-size      Soup size (memory cells)
#   -m, --mutation-rate  Mutation rate (0.0-1.0)
#   --seed               Random seed for reproducibility
#   --max-organisms      Maximum living organisms
#   -o, --output         Output file for state
#   --report-interval    Progress report interval
#   -q, --quiet          Quiet mode

# –ü—Ä–∏–º–µ—Ä—ã
java -jar proteus.jar run -c 1000000 -m 0.002
java -jar proteus.jar run -s 100000 --max-organisms 5000
java -jar proteus.jar run --seed 12345  # –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π –∑–∞–ø—É—Å–∫

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
java -jar proteus.jar info

# –ü–æ–º–æ—â—å
java -jar proteus.jar --help
java -jar proteus.jar run --help
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (HOCON)

–î–µ—Ñ–æ–ª—Ç—ã –≤ `reference.conf`, –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `--config file.conf`:

```hocon
proteus {
  soup.size = 10000           # –†–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏
  
  mutation {
    rate = 0.002              # 0.2% ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–µ—Ñ–æ–ª—Ç
    seed = 0                  # 0 = —Å–ª—É—á–∞–π–Ω—ã–π
  }
  
  reaper {
    strategy = "age-based"
    max-errors = 100          # –°–º–µ—Ä—Ç—å –ø–æ—Å–ª–µ 100 –æ—à–∏–±–æ–∫
  }
  
  limits {
    max-cycles = 0            # 0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
    max-organisms = 1000      # –õ–∏–º–∏—Ç –ø–æ–ø—É–ª—è—Ü–∏–∏
  }
  
  persistence {
    file = "proteus-run.mv"
    checkpoint-interval = 10000
  }
  
  reporting.interval = 1000   # –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ N —Ü–∏–∫–ª–æ–≤
}
```

### –≠–º–ø–∏—Ä–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

#### Mutation Rate

| Rate | –†–µ–∂–∏–º | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|-------|-----------|
| 0.1% | –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π | –°—Ç–∞–±–∏–ª—å–Ω–æ, –º–∞–ª–æ —ç–≤–æ–ª—é—Ü–∏–∏ |
| **0.2%** | **–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π** | –ë–∞–ª–∞–Ω—Å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —ç–≤–æ–ª—é—Ü–∏–∏ |
| 0.3% | –ê–∫—Ç–∏–≤–Ω—ã–π | –ë–æ–ª—å—à–µ —ç–≤–æ–ª—é—Ü–∏–∏, –ª—ë–≥–∫–∏–π —Ä–∏—Å–∫ |
| 0.5% | –ì—Ä–∞–Ω–∏—á–Ω—ã–π | –ë–∏—Ñ—É—Ä–∫–∞—Ü–∏—è ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç seed |
| 1.0%+ | Error catastrophe | –í—ã–º–∏—Ä–∞–Ω–∏–µ |

**–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ –≠–π–≥–µ–Ω–∞:** `Œº_max ‚âà 1/L = 1/13 ‚âà 7.7%`
**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥:** 0.5%-1.0% (–Ω–µ –≤—Å–µ –±–∏—Ç—ã –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã)

#### –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ soup/organisms

| Soup size | Max organisms | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-----------|---------------|-------------|
| 10K | 1,000 | ~100 org –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ |
| 100K | 5,000-7,000 | ~7,600 max (100K/13) |
| 1M | 50,000-70,000 | –ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

**–§–æ—Ä–º—É–ª–∞:** `max_organisms ‚âà soup_size / genome_size * 0.7`

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **aliveOrganisms[]** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∂–∏–≤—ã—Ö –¥–ª—è O(alive) –∏—Ç–µ—Ä–∞—Ü–∏–∏
2. **Early exit** ‚Äî `if (aliveCount == 0) return` –≤ runCycle()
3. **INFO logging** ‚Äî DEBUG —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É (`-Dproteus.log.level=DEBUG`)
4. **Population limit** ‚Äî maxOrganisms –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç

### Graceful Shutdown

–û–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C:
```
^C
‚è∏Ô∏è  Stopping gracefully...

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SIMULATION COMPLETE           
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
...
üîë Seed: 1735645823456 (use --seed 1735645823456 to reproduce)
```

---

## 12. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
mvn test
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
src/test/java/
‚îî‚îÄ‚îÄ io/github/manjago/proteus/core/
    ‚îú‚îÄ‚îÄ OpCodeTest.java        ‚Äî –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
    ‚îú‚îÄ‚îÄ VirtualCPUTest.java    ‚Äî –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
    ‚îú‚îÄ‚îÄ DisassemblerTest.java  ‚Äî –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚îú‚îÄ‚îÄ GenomeBuilderTest.java ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥–µ–Ω–æ–º–æ–≤
    ‚îú‚îÄ‚îÄ AdamTest.java          ‚Äî —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è Adam'–∞
    ‚îú‚îÄ‚îÄ MemoryManagerTest.java ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é (20 —Ç–µ—Å—Ç–æ–≤)
    ‚îî‚îÄ‚îÄ ReaperTest.java        ‚Äî –∂–Ω–µ—Ü (14 —Ç–µ—Å—Ç–æ–≤)
```

---

## 13. Roadmap

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Stage 1-2: Core)

- [x] ISA v1.1 (16 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π + MOVI)
- [x] VirtualCPU —Å –º—É—Ç–∞—Ü–∏—è–º–∏
- [x] Adam (13 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π)
- [x] –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
- [x] MemoryManager (Free List + First Fit)
- [x] Reaper (Age-Based)
- [x] Organism (–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å)
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ AdamDemo ‚Äî –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∂–∏–∑–Ω–∏ —Å Reaper'–æ–º
- [x] MutationTracker ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –≤—ã–∂–∏–≤—à–∏—Ö –º—É—Ç–∞—Ü–∏–π

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Stage 3: Application)

- [x] **SimulatorConfig** ‚Äî HOCON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (typesafe-config)
- [x] **Simulator** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
- [x] **CLI** ‚Äî picocli (run, analyze, info)
- [x] **Graceful shutdown** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C
- [x] **Random seed** ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–æ–≤
- [x] **Population limit** ‚Äî maxOrganisms –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–æ—Å—Ç–∞
- [x] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è O(alive)** ‚Äî aliveOrganisms[] –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- [x] **–≠–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** ‚Äî –Ω–∞–π–¥–µ–Ω—ã –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ mutation rates

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Stage 3.5: ISA v1.2 PIC)

- [x] **Position-Independent Code** ‚Äî –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è
- [x] **GETADDR** ‚Äî –Ω–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è startAddr
- [x] **IP-relative JMP** ‚Äî –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- [x] **startAddr-relative LOAD/STORE** ‚Äî –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–π –ø–∞–º—è—Ç–∏
- [x] **Adam v3** ‚Äî 14 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, position-independent
- [x] **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏** ‚Äî –∫–æ–¥ –Ω–µ –Ω—É–∂–Ω–æ –ø–∞—Ç—á–∏—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏

### üöß –í —Ä–∞–±–æ—Ç–µ (Stage 4: Defragmentation & Persistence)

- [ ] **–î–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–º—è—Ç–∏** ‚Äî –∫–æ–º–ø–∞–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (—Ç–µ–ø–µ—Ä—å —Ç—Ä–∏–≤–∏–∞–ª—å–Ω–∞ —Å PIC!)
- [ ] **PersistenceManager** ‚Äî H2 MVStore –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] **EventLogger** ‚Äî –∂—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π (JSON Lines)
- [ ] **Checkpoints** ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- [ ] –ö–æ–º–∞–Ω–¥–∞ `resume` ‚Äî –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å checkpoint'–∞
- [ ] –ö–æ–º–∞–Ω–¥–∞ `analyze` ‚Äî –∞–Ω–∞–ª–∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### üìã –ü–ª–∞–Ω—ã (Stage 5: Analytics)

- [ ] Genealogy tracking (—Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã–µ)
- [ ] Diversity metrics (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≥–µ–Ω–æ–º—ã, Hamming distance)
- [ ] Export –≤ CSV/JSON

### üìã –ü–ª–∞–Ω—ã (Stage 6+: Advanced)

- [ ] Web UI –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ (–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å)
- [ ] Energy-based scheduling
- [ ] –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä (–¥–µ–ø–ª–æ–π –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤ –∏–≥—Ä–æ–∫–∞–º–∏)

---

## –°—Å—ã–ª–∫–∏

- [Tierra (Wikipedia)](https://en.wikipedia.org/wiki/Tierra_(computer_simulation))
- [Avida](https://en.wikipedia.org/wiki/Avida) ‚Äî —Ä–∞–∑–≤–∏—Ç–∏–µ –∏–¥–µ–π Tierra
- [ISA_SPEC.md](ISA_SPEC.md) ‚Äî –ø–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
