# Proteus

**–°–∏–º—É–ª—è—Ü–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏** –≤ —Å—Ç–∏–ª–µ [Tierra](https://en.wikipedia.org/wiki/Tierra_(computer_simulation)) (Thomas S. Ray, 1991).

–û—Ä–≥–∞–Ω–∏–∑–º—ã ‚Äî —ç—Ç–æ —Å–∞–º–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—â–∏–µ—Å—è –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∂–∏–≤—É—â–∏–µ –≤ –æ–±—â–µ–π –ø–∞–º—è—Ç–∏ ("—Å—É–ø–µ"). –û–Ω–∏ –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç –∑–∞ —Ä–µ—Å—É—Ä—Å—ã, –º—É—Ç–∏—Ä—É—é—Ç –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—Ç.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –°–±–æ—Ä–∫–∞
mvn clean package -DskipTests

# –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ (100K —Ü–∏–∫–ª–æ–≤, 1M —è—á–µ–µ–∫ –ø–∞–º—è—Ç–∏)
./sim.sh

# –ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
java -jar target/proteus-*.jar run --cycles 500000 --soup-size 100000
```

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SIMULATION COMPLETE           
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚è±Ô∏è  Time: 5 min 37 sec  |  Speed: 296 cycles/sec

üë• Population:
   Alive: 5 000  |  Total spawns: 6 558 349
   Deaths: 18 by errors, 6 553 332 by reaper

üíæ Memory:
   Used: 93 312 / 1 000 000 cells (9,3%)
   Memory leak: 0 ‚úì

üß¨ Evolution:
   Mutations: 113 344 total (0,017 per spawn)
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| [ARCHITECTURE.md](ARCHITECTURE.md) | –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã, –¥–∏–∑–∞–π–Ω-—Ä–µ—à–µ–Ω–∏—è, roadmap |
| [docs/ISA_SPEC.md](docs/ISA_SPEC.md) | –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (ISA v1.2) |
| [docs/ASM_SPEC.md](docs/ASM_SPEC.md) | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ |

## üß¨ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—Ä–≥–∞–Ω–∏–∑–º—ã

–ö–∞–∂–¥—ã–π –æ—Ä–≥–∞–Ω–∏–∑–º ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤ 10-50 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä–∞—è:
1. –í—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å –¥–ª—è –ø–æ—Ç–æ–º–∫–∞ (`ALLOCATE`)
2. –ö–æ–ø–∏—Ä—É–µ—Ç —Å–µ–±—è (`COPY`) ‚Äî –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç **–º—É—Ç–∞—Ü–∏–∏**!
3. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–º–∫–∞ (`SPAWN`)
4. –ü–æ–≤—Ç–æ—Ä—è–µ—Ç

### –≠–≤–æ–ª—é—Ü–∏—è

- **–ú—É—Ç–∞—Ü–∏–∏** –ø—Ä–∏ `COPY` —Å–æ–∑–¥–∞—é—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ
- **Reaper** —É–±–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã—Ö/–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö
- –í—ã–∂–∏–≤–∞—é—Ç —Ç–µ, –∫—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑–º–Ω–æ–∂–∞–µ—Ç—Å—è

### –ü–∞—Ä–∞–∑–∏—Ç–∏–∑–º

- –û—Ä–≥–∞–Ω–∏–∑–º—ã –º–æ–≥—É—Ç **—á–∏—Ç–∞—Ç—å** –∏ **–ø–∏—Å–∞—Ç—å** –≤ –ª—é–±—É—é –ø–∞–º—è—Ç—å
- –ö–æ–º–∞–Ω–¥–∞ `SEARCH` –∏—â–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã (—Å–∏–≥–Ω–∞—Ç—É—Ä—ã –¥—Ä—É–≥–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤)
- –•–∏—â–Ω–∏–∫–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –∫–æ–¥ –∂–µ—Ä—Ç–≤, –ª–æ–º–∞—è –∏—Ö —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é

## üîß –ê—Å—Å–µ–º–±–ª–µ—Ä

–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∞—Å—Å–µ–º–±–ª–µ—Ä–µ:

```asm
; –ú–æ–π –æ—Ä–≥–∞–Ω–∏–∑–º
start:
    GETADDR R7          ; –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –∞–¥—Ä–µ—Å
    MOVI R4, 14         ; –†–∞–∑–º–µ—Ä –≥–µ–Ω–æ–º–∞
    ALLOCATE R4, R3     ; –í—ã–¥–µ–ª–∏—Ç—å –ø–∞–º—è—Ç—å –¥–ª—è –ø–æ—Ç–æ–º–∫–∞
    ; ... —Ü–∏–∫–ª –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ...
    SPAWN R3, R4        ; –°–æ–∑–¥–∞—Ç—å –ø–æ—Ç–æ–º–∫–∞
    JMP start           ; –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
```

```bash
# –ê—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
java -jar proteus-*.jar assemble myorg.asm -d
```

## üìÇ –ü—Ä–∏–º–µ—Ä—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| [examples/adam.asm](examples/adam.asm) | –ü–µ—Ä–≤—ã–π –æ—Ä–≥–∞–Ω–∏–∑–º ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ç–æ—Ä |
| [examples/parasite.asm](examples/parasite.asm) | –ü–∞—Ä–∞–∑–∏—Ç ‚Äî –∏—â–µ—Ç –∏ –∞—Ç–∞–∫—É–µ—Ç Adam'–æ–≤ |

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `--soup-size` | 1,000,000 | –†–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏ (—è—á–µ–π–∫–∏) |
| `--cycles` | 100,000 | –ú–∞–∫—Å–∏–º—É–º —Ü–∏–∫–ª–æ–≤ —Å–∏–º—É–ª—è—Ü–∏–∏ |
| `--mutation-rate` | 0.002 | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –º—É—Ç–∞—Ü–∏–∏ –ø—Ä–∏ COPY |
| `--max-organisms` | 5,000 | –ú–∞–∫—Å–∏–º—É–º –∂–∏–≤—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤ |
| `--seed` | random | Seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ |

## üó∫Ô∏è Roadmap

- [x] –ë–∞–∑–æ–≤–∞—è —Å–∏–º—É–ª—è—Ü–∏—è (ISA v1.2, Position-Independent Code)
- [x] –ê—Å—Å–µ–º–±–ª–µ—Ä —Å –º–µ—Ç–∫–∞–º–∏ –∏ .word –¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π
- [ ] Manual Deploy ‚Äî –∏–Ω—ä–µ–∫—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤ –≤ —Ä–∞–±–æ—Ç–∞—é—â—É—é —Å–∏–º—É–ª—è—Ü–∏—é
- [ ] Frame Recorder ‚Äî –ø–æ–∫–∞–¥—Ä–æ–≤–∞—è –∑–∞–ø–∏—Å—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- [ ] Checkpoint/Resume ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] Web UI ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è soup –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] Multiplayer ‚Äî —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤ —Ä–∞–∑–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

## üìö –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ

- [Tierra](https://en.wikipedia.org/wiki/Tierra_(computer_simulation)) ‚Äî Thomas S. Ray, 1991
- [Avida](https://en.wikipedia.org/wiki/Avida) ‚Äî —Ä–∞–∑–≤–∏—Ç–∏–µ –∏–¥–µ–π Tierra
- [Core War](https://en.wikipedia.org/wiki/Core_War) ‚Äî "–≤–æ–π–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º" –≤ –ø–∞–º—è—Ç–∏

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
